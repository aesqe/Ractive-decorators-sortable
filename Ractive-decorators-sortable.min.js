var sortableDecorator=function(a,b){"use strict";if("undefined"!=typeof module&&module.exports&&"function"==typeof require)b(require("Ractive"));else if("function"==typeof define&&define.amd)define(["Ractive"],b);else{if(!a.Ractive)throw new Error("Could not find Ractive! It must be loaded before the Ractive-decorators-sortable plugin");b(a.Ractive)}}("undefined"!=typeof window?window:this,function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l;return b="undefined"!=typeof window?window:this,c=function(a){return a.draggable=!0,a.addEventListener("dragstart",h,!1),a.addEventListener("dragenter",i,!1),a.addEventListener("dragleave",j,!1),a.addEventListener("drop",j,!1),a.addEventListener("dragover",k,!1),{teardown:function(){a.removeEventListener("dragstart",h,!1),a.removeEventListener("dragenter",i,!1),a.removeEventListener("dragleave",j,!1),a.removeEventListener("drop",j,!1),a.removeEventListener("dragover",k,!1)}}},c.targetClass="droptarget",l="The sortable decorator only works with elements that correspond to array members",h=function(b){var c,h=a.getNodeInfo(this);if(e=h.keypath,c=e.lastIndexOf("."),-1===c)throw new Error(l);if(f=e.substr(0,c),g=+e.substring(c+1),isNaN(g))throw new Error(l);b.dataTransfer.setData("foo",!0),d=h.ractive},i=function(){var e,h,i,j,k,m;if(this._ractive.root===d){if(e=a.getNodeInfo(this).keypath,h=e.lastIndexOf("."),-1===h)throw new Error(l);if(i=e.substr(0,h),j=+e.substring(h+1),i===f){if(j===g)return void this.classList.add(c.targetClass);k=d.get(f);var n=d.adaptors.Backbone&&k instanceof b.Backbone.Collection;n?k.remove(m=k.models[g]):m=k.splice(g,1)[0],g=j,n?k.add(m,{at:g}):k.splice(g,0,m)}}},j=function(){this.classList.remove(c.targetClass)},k=function(a){a.preventDefault()},a.decorators.sortable=c,c});"undefined"!=typeof module&&module.exports&&(module.exports=sortableDecorator);